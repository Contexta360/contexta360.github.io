/*! For license information please see 357.min.e8e9f070abb2cb54508a.js.LICENSE.txt */
/*!
 * Core v1.3.0-alpha (https://contexta360.com/)
 * Copyright (c) 2020-2021 Contexta B.V.
 * @license ISC (Last change on: 01/10/2021 12:07:09)
 *
 * Frontend developed by kuus <kunderikuus@gmail.com> (https://kuus.github.io)
 */
(self.webpackChunk_contexta360_core=self.webpackChunk_contexta360_core||[]).push([[357],{12357:(e,n,t)=>{"use strict";t.r(n),t.d(n,{ToPdf:()=>m});var r=t(56470),o=t(77162),a=t.n(o),i=t(31763),c=t.n(i),d=t(11499);var s={37:1,38:1,39:1,40:1},u=function(e){e.preventDefault()},l=function(e){if(s[e.keyCode])return u(e),!1},p=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){p=!0}}))}catch(e){}var h=!!p&&{passive:!1},w="onwheel"in document.createElement("div")?"wheel":"mousewheel",f=t(75061),v=t(35958),m=function(e,n){e.headline;var t=e.filename,o=1920,i=297,s=211,p=15,m=["appheader","breadcrumbs","panel-sticky-top","topdf-btn"],g=["body","panel-grid"],y=document.getElementsByTagName("html")[0],x=function(){var e=(0,r.Z)(a().mark((function e(n){var t,r,i,d,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=document.querySelector(".panelBody"),n&&(d.style.display="none",r=n.parentNode,i=n.previousElementSibling,t=document.body.appendChild(n)),n=n||document.body,P(),e.next=6,E(n);case 6:return s=performance.now(),e.next=9,c()(document.body,{scale:1,useCORS:!0,allowTaint:!0,foreignObjectRendering:!0,windowWidth:o,windowHeight:860,logging:!1});case 9:return u=e.sent,console.log("html to canvas took ".concat(performance.now()-s)),t&&(d.style.display="",i?(a=t,(l=i).parentNode.insertBefore(a,l.nextSibling)):r&&r.appendChild(t)),e.abrupt("return",u);case 13:case"end":return e.stop()}var a,l}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=n||document.body,L(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(e,n){return new Promise((function(t){setTimeout((function(){e(),t(!0)}),n)}))},E=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("DOMMouseScroll",u,!1),window.addEventListener(w,u,h),window.addEventListener("touchmove",u,h),window.addEventListener("keydown",l,!1),window.scroll(0,0),y.classList.add("topdf"),n.style.width="".concat(o,"px"),S((function(e){e.style.width="".concat(o,"px")})),window.dispatchEvent(new Event("resize")),e.next=8,k((function(){n.style.height="".concat(n.scrollHeight,"px"),n.style.width="".concat(n.scrollWidth,"px")}),500);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),L=function(e){window.removeEventListener("DOMMouseScroll",u,!1),window.removeEventListener(w,u,h),window.removeEventListener("touchmove",u,h),window.removeEventListener("keydown",l,!1),S((function(e){e.style.width=""})),e.style.height="",e.style.width="",y.classList.remove("topdf"),window.dispatchEvent(new Event("resize"))},S=function(e){for(var n=0;n<g.length;n++){var t=g[n],r=document.querySelector(t);r&&e(r)}},P=function(){for(var e=0;e<m.length;e++){var n=m[e],t=document.querySelector(n);t&&t.setAttribute("data-html2canvas-ignore","")}},C=function(e){return e.width>e.height?"l":"p"},M=function(e,n,t,r,o){var a=e.width,i=e.height,c="l"===n?t:0,d="p"===n?t:0;c||(c=a*t/i),d||(d=i*t/a);var s=c>=d?c:d,u=c<d?c:d;if(u>r){var l=r/u;u=r,o||(s*=l)}if(s>t){var p=t/s;s=t,u*=p}return"l"===n?(c=s,d=u):(c=u,d=s),{width:c,height:d}};function T(e){var n=new Image;n.src=f.Z;e.addImage(n,"png",e.internal.pageSize.width-15-30,7.5,30,5730/1243)}return{downloadMany:function(){var e=(0,r.Z)(a().mark((function e(){var r,o,c,u,l,h,w,f,m,g,y,k,E,L,S,P,C,Z,D=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=D.length>0&&void 0!==D[0]?D[0]:".topdfPage",o=D.length>1&&void 0!==D[1]?D[1]:"l",c=D.length>2?D[2]:void 0,u=D.length>3?D[3]:void 0,l=document.querySelectorAll(r),h="a4",w=new d.kH(o,"mm",h),f=i,m=s,g=p,"l"===o?(m=m-g-p,f-=30):(f=f-g-p,m-=30),n({type:v.p6,payload:l.length}),y=0;case 13:if(!(y<l.length)){e.next=27;break}return k=l[y],n({type:v._M,payload:y}),e.next=18,x(k);case 18:E=e.sent,L=M(E,o,f,m,u),S=L.width,P=L.height,C=c?p+("l"===o?(f-S)/2:(m-S)/2):p,w.addImage(E.toDataURL("image/jpeg"),"JPG",C,g,S,P,"","FAST"),T(w),y<l.length-1&&w.addPage(h,o);case 24:y++,e.next=13;break;case 27:for(Z=0;Z<l.length;Z++)b(l[Z]);return e.next=30,w.save((t||"sample-file")+".pdf",{returnPromise:!0});case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),download:function(){var e=(0,r.Z)(a().mark((function e(){var n,r,o,c,u,l,h,w,f,v,m,g,y,k=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.length>0&&void 0!==k[0]?k[0]:"l",r=k.length>1?k[1]:void 0,o=k.length>2?k[2]:void 0,c=k.length>3?k[3]:void 0,e.next=6,x();case 6:return u=e.sent,n=n||C(u),l=new d.kH(n,"mm","a4"),h=i,w=s,"l"===n?(w-=30,h-=30):(h-=30,w-=30),f=M(u,n,h,w,c),v=f.width,m=f.height,g=r?p+("l"===n?(h-v)/2:(w-v)/2):p,y=o?p+("l"===n?(w-m)/2:(h-m)/2):p,l.addImage(u.toDataURL("image/jpeg"),"JPG",g,y,v,m,"","FAST"),T(l),b(),e.next=20,l.save((t||"sample-file")+".pdf",{returnPromise:!0});case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}}}]);