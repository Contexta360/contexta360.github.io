/*! For license information please see 357.min.da233630d25df26a22c9.js.LICENSE.txt */
/*!
 * Core v1.2.9 (https://contexta360.com/)
 * Copyright (c) 2020-2021 Contexta B.V.
 * @license ISC (Last change on: 22/09/2021 09:44:16)
 *
 * Frontend developed by kuus <kunderikuus@gmail.com> (https://kuus.github.io)
 */
(self.webpackChunk_contexta360_core=self.webpackChunk_contexta360_core||[]).push([[357],{12357:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ToPdf:()=>m});var r=n(56470),o=n(77162),i=n.n(o),a=n(25176),c=n.n(a),d=n(73856);var s={37:1,38:1,39:1,40:1},u=function(e){e.preventDefault()},l=function(e){if(s[e.keyCode])return u(e),!1},p=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){p=!0}}))}catch(e){}var f=!!p&&{passive:!1},h="onwheel"in document.createElement("div")?"wheel":"mousewheel",w=n(75061),v=n(35958),m=function(e,t){var n=e.idealWidth,o=e.headline,a=e.filename,s=n?"string"==typeof n?parseInt(n,10):n:1920,p=15,m=["appheader","breadcrumbs","panel-sticky-top","topdf-btn"],y=["body","panel-grid"],g=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,a,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=document.querySelector(".panelBody"),t&&(a.style.display="none",r=t.parentNode,o=t.previousElementSibling,n=document.body.appendChild(t)),t=t||document.body,S(),e.next=6,k(t);case 6:return e.next=8,c()(document.body,{scale:1,useCORS:!0,onclone:P,allowTaint:!0,foreignObjectRendering:!0,windowWidth:1920,windowHeight:860});case 8:return d=e.sent,n&&(a.style.display="",o?(i=n,(s=o).parentNode.insertBefore(i,s.nextSibling)):r&&r.appendChild(n)),e.abrupt("return",d);case 11:case"end":return e.stop()}var i,s}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=t||document.body,E(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e,t){return new Promise((function(n){setTimeout((function(){e(),n(!0)}),t)}))},k=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("DOMMouseScroll",u,!1),window.addEventListener(h,u,f),window.addEventListener("touchmove",u,f),window.addEventListener("keydown",l,!1),window.scroll(0,0),document.body.classList.add("topdf"),t.style.width="".concat(s,"px"),L((function(e){e.style.width="".concat(s,"px")})),window.dispatchEvent(new Event("resize")),e.next=8,b((function(){t.style.height="".concat(t.scrollHeight,"px"),t.style.width="".concat(t.scrollWidth,"px")}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){window.removeEventListener("DOMMouseScroll",u,!1),window.removeEventListener(h,u,f),window.removeEventListener("touchmove",u,f),window.removeEventListener("keydown",l,!1),L((function(e){e.style.width=""})),e.style.height="",e.style.width="",document.body.classList.remove("topdf"),window.dispatchEvent(new Event("resize"))},L=function(e){for(var t=0;t<y.length;t++){var n=y[t],r=document.querySelector(n);r&&e(r)}},S=function(){for(var e=0;e<m.length;e++){var t=m[e],n=document.querySelector(t);n&&n.setAttribute("data-html2canvas-ignore","")}},P=function(e,t){},C=function(e){return e.width>e.height?"l":"p"},M=function(e,t,n,r,o){var i=e.width,a=e.height,c="l"===t?n:0,d="p"===t?n:0;c||(c=i*n/a),d||(d=a*n/i);var s=c>=d?c:d,u=c<d?c:d;if(u>r){var l=r/u;u=r,o||(s*=l)}if(s>n){var p=n/s;s=n,u*=p}return"l"===t?(c=s,d=u):(c=u,d=s),{width:c,height:d}};function Z(e){var t=new Image;t.src=w.Z;e.addImage(t,"png",e.internal.pageSize.width-15-30,7.5,30,5730/1243)}return{downloadMany:function(){var e=(0,r.Z)(i().mark((function e(){var n,r,o,c,s,u,l,f,h,w,m,y,b,k,E,L,S,P,C=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C.length>0&&void 0!==C[0]?C[0]:".topdfPage",r=C.length>1&&void 0!==C[1]?C[1]:"l",o=C.length>2?C[2]:void 0,c=C.length>3?C[3]:void 0,s=document.querySelectorAll(n),u="a4",l=new d.kH(r,"mm",u),f=297,h=211,w=p,"l"===r?(h=h-w-p,f-=30):(f=f-w-p,h-=30),t({type:v.p6,payload:s.length}),m=0;case 13:if(!(m<s.length)){e.next=27;break}return y=s[m],t({type:v._M,payload:m}),e.next=18,g(y);case 18:b=e.sent,k=M(b,r,f,h,c),E=k.width,L=k.height,S=o?p+("l"===r?(f-E)/2:(h-E)/2):p,l.addImage(b.toDataURL("image/jpeg"),"JPG",S,w,E,L),Z(l),m<s.length-1&&l.addPage(u,r);case 24:m++,e.next=13;break;case 27:for(P=0;P<s.length;P++)x(s[P]);return e.next=30,l.save((a||"sample-file")+".pdf",{returnPromise:!0});case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),download:function(){var e=(0,r.Z)(i().mark((function e(){var t,n,r,c,s,u,l,f,h,w;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,n=C(t),r=new d.kH(n,"mm","a4"),c=297,s=211,u=p,o&&(r.setFontSize(10),r.text(o,p,u),u=10/6+u,"l"===n?(s=s-u-p,c=c):(c=c-u-p,s=s)),l=M(t,n,c,s),f=l.width,h=l.height,w="l"===n?(c-f)/2:(s-f)/2,r.addImage(t.toDataURL("image/jpeg"),"JPG",w,u,f,h),Z(r),x(),e.next=16,r.save((a||"sample-file")+".pdf",{returnPromise:!0});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}}}]);